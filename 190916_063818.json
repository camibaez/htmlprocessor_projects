{"nodes":[{"code":"var r = \/\\s?(mc[a-zA-Z0-9]*)\\s*=\\s*new\\s*MessageContext\\((\\s|.)*?\\);\/g;\r\ntarget = target.replace(r,  '$1 = new MessageContext(getMessageHandler(\"<cleaner#pname>\"), cleaner_vname);');\r\n r = \/cleaner_vname\/g;\r\nwhile (result = r.exec(target)) {\r\n    var index = result.index;\r\n    var Roaster = Java.type('org.jboss.forge.roaster.Roaster');\r\n    var JavaClassSource = Java.type('org.jboss.forge.roaster.model.source.JavaClassSource');\r\n\r\n    var parsingResult = Roaster.parse(JavaClassSource.class, target);\r\n    var methodsList = parsingResult.getMethods();\r\n    var method = null;\r\n    var start = 0;\r\n    var end = 0;\r\n    for (var i = 0; methodsList.length; i++) {\r\n        var m = methodsList[i];\r\n        start = m.getStartPosition();\r\n        end = m.getEndPosition();\r\n        if (start < index && index < end) {\r\n            method = m;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (method === null)\r\n        continue;\r\n\r\n    var parameterName = null;\r\n    var parameters = method.getParameters();\r\n    for (var i = 0; i < parameters.length; i++) {\r\n        var pType = parameters[i].getType().getName();\r\n        var pName = parameters[i].getName();\r\n\r\n        if (pType === 'HttpServletRequest') {\r\n            parameterName = pName;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (parameterName === null)\r\n        continue;\r\n\r\n    var pre = target.substring(0, start);\r\n    var inText = target.substring(start, end);\r\n    var post = target.substring(end);\r\n    \r\n    inText = inText.replace(r, parameterName);\r\n    \r\n    target = pre + inText + post;\r\n\r\n}\r\n\r\nreturn target;","class":"ExecutableAction","id":"a866830514","type":"Action","active":true},{"pattern":"*.java","class":"FilePattern","id":"c1128802217","type":"Condition","active":true}],"lastWorkingDirectory":null,"name":null,"description":null,"graph":"strict digraph G {\r\n  START_NODE [ label=\"START_NODE\" ];\r\n  END_NODE [ label=\"END_NODE\" ];\r\n  FAIL_NODE [ label=\"FAIL_NODE\" ];\r\n  a866830514 [ label=\"a866830514\" ];\r\n  c1128802217 [ label=\"c1128802217\" ];\r\n  START_NODE -> c1128802217 [ label=\"et1977621177\" ];\r\n  c1128802217 -> a866830514 [ label=\"et1453272680\" ];\r\n  c1128802217 -> FAIL_NODE [ label=\"ef501097153\" ];\r\n  a866830514 -> END_NODE [ label=\"et1485183699\" ];\r\n}\r\n"}