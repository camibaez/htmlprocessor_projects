{"nodes":[{"pattern":"*.jsp","class":"FilePattern","id":"jspFilter","type":"Condition","active":true},{"pattern":"<script.*src=\".*javascripts\/optMenu\\.jsp\".*>.*<\/script>","flags":2,"condition":"-","class":"TextContent","id":"c1","type":"Condition","active":true},{"pattern":"(<script.*\/pages\/e\/javascripts\/eIBS\\.jsp\".*>.*<\/script>)","replace":"$1\n<script src=\"<%=request.getContextPath()%>\/pages\/e\/javascripts\/optMenu.jsp\"><\/script>","flags":2,"class":"ReplaceText","id":"addOptionMenuJs","type":"Action","active":true},{"pattern":"<link.*href=\".*jquery\\.contextMenu\\.css\".*rel=\"stylesheet\".*type=\"text\/css\\\".*\/>","flags":2,"condition":"-","class":"TextContent","id":"c2","type":"Condition","active":true},{"pattern":"(<link.*href=\".*\/pages\/style.css\".*rel=\"stylesheet\".*>)","replace":"<link href=\"<%=request.getContextPath()%>\/jquery\/plugins\/contextMenu\/css\/jquery.contextMenu.css\" rel=\"stylesheet\" type=\"text\/css\" \/>\n$1","flags":2,"class":"ReplaceText","id":"addContextCss","type":"Action","active":true},{"code":"var target = exchange['in'];\nvar data = exchange['config'];\n\nr = \/eval\\('(.+?)'\\s+?[+\\-*]+\\s+([a-z]+).+;\/g;\ntarget = target.replace(r, '$1$2;');\n\nr = \/style\\.pixelTop\\s*=(\\s?(.|\\s)*?);\/g;\ntarget = target.replace(r, 'style.top = $1 + \"px\";');\n\nr = \/style\\.pixelLeft\\s*=(\\s?(.|\\s)*?);\/g;\ntarget = target.replace(r, 'style.left = $1 + \"px\";');\n\nr = \/style\\.pixelRight\\s*=(\\s?(.|\\s)*?);\/g;\ntarget = target.replace(r, 'style.right = $1 + \"px\"');\n\nr = \/(.*\\.filters\\[0\\]\\.(apply|Play)\\(\\);)\/g;\ntarget = target.replace(r, '\/\/$1');\n\nreturn target;","class":"ExecutableAction","id":"oldIEJsCleaner","type":"Action","active":true},{"code":"var target = exchange['in'];\nvar data = exchange['config'];\n\nr = \/oncontextmenu=\"showPopUp\\(\/g;\ntarget = target.replace(r, 'class=\"context-menu-help\" onmousedown=\"showPopUp(');\n\nr = \/.*builtHPopUp\\(\\);\/g;\ntarget = target.replace(r, '\/\/builtHPopUp();');\n\nr = \/.*showPopUpHelp\\(\\)*\/gi;\ntarget = target.replace(r, '\/\/showPopUpHelp()');\n\nreturn target;","class":"ExecutableAction","id":"commentMethods","type":"Action","active":true},{"pattern":".*oncontextmenu=\"showPopUp\\(.*","flags":0,"condition":"+","class":"TextContent","id":"contextmenuFilter","type":"Condition","active":true},{"code":"var target = exchange['in'];\nvar data = exchange['config'];\n\nvar r = \/<(div|p|h|a|table|td|tr)\\s+id=(\"|')([a-zA-Z0-9]+)(\"|')\/gi;\nvar text = target;\n\nvar ids = [];\nvar regexList = text.match(r);\nif (regexList) {\n    for (var i = 0; i < regexList.length; i++) {\n        var res = regexList[i].match(\/id=('|\")([a-zA-Z0-9]+)('|\")\/);\n        if (res) {\n            ids.push(res[2]);\n        }\n    }\n\n    for (var i = 0; i < ids.length; i++) {\n        var id = ids[i];\n        r = new RegExp('<script[^>]*>(?:[^<]+|<(?!\/script>))+', 'gi');\n        while (res = r.exec(text)) {\n            var begin = res.index;\n            var end = begin + res[0].length;\n\n            var pre = text.substring(0, begin);\n            var inText = text.substring(begin, end);\n            var post = text.substring(end);\n            inText = inText.replace(new RegExp(\"(\\\\(?)(\" + id + \")((\\\\.|\\\\s*,|\\\\s*\\\\)))\", 'g'), \"$1getElement('\" + id + \"')$3\");\n\n            text = pre + inText + post;\n\n        }\n\n    }\n}\n\nreturn text;\n","class":"ExecutableAction","id":"replaceVariableForId","type":"Action","active":true},{"code":"var target = exchange['in'];\r\nvar data = exchange['config'];\r\n\r\nvar r = \/<(div|p|a|span|img)\\b([^>]*)align=\"(left|center|right)\"(?:([^>]*)style=\"([^\">]*)\")?([^>]*)>\/g;\r\ntarget = target.replace(r, '<$1$2style=\"text-align:$3;$5\"$4$6>');\r\n\r\nr = \/<!DOCTYPE.*?>\/gi;\r\nmatches = target.match(r);\r\nif(matches){\r\n \ttarget = target.replace(\/<!DOCTYPE.*?>\/i, \"<!DOCTYPE html>\");\r\n}else{\r\n \ttarget = target.replace(\/(<html.*?>)\/i, \"<!DOCTYPE html>$1\");\r\n}\r\nreturn target;","class":"ExecutableAction","id":"oldHtmlChange","type":"Action","active":true}],"lastWorkingDirectory":null,"name":null,"description":null,"graph":"strict digraph G {\r\n  START_NODE [ label=\"START_NODE\" ];\r\n  END_NODE [ label=\"END_NODE\" ];\r\n  FAIL_NODE [ label=\"FAIL_NODE\" ];\r\n  jspFilter [ label=\"jspFilter\" ];\r\n  c1 [ label=\"c1\" ];\r\n  addOptionMenuJs [ label=\"addOptionMenuJs\" ];\r\n  c2 [ label=\"c2\" ];\r\n  addContextCss [ label=\"addContextCss\" ];\r\n  oldIEJsCleaner [ label=\"oldIEJsCleaner\" ];\r\n  commentMethods [ label=\"commentMethods\" ];\r\n  contextmenuFilter [ label=\"contextmenuFilter\" ];\r\n  replaceVariableForId [ label=\"replaceVariableForId\" ];\r\n  oldHtmlChange [ label=\"oldHtmlChange\" ];\r\n  START_NODE -> jspFilter [ label=\"et172779546\" ];\r\n  jspFilter -> oldIEJsCleaner [ label=\"et1534230827\" ];\r\n  jspFilter -> FAIL_NODE [ label=\"ef1722694639\" ];\r\n  c1 -> addOptionMenuJs [ label=\"et1386637319\" ];\r\n  c1 -> contextmenuFilter [ label=\"ef620512793\" ];\r\n  oldIEJsCleaner -> replaceVariableForId [ label=\"et1210785435\" ];\r\n  replaceVariableForId -> oldHtmlChange [ label=\"et318023844\" ];\r\n  oldHtmlChange -> c1 [ label=\"et1063391789\" ];\r\n  addOptionMenuJs -> contextmenuFilter [ label=\"et1258586357\" ];\r\n  contextmenuFilter -> commentMethods [ label=\"et1243194625\" ];\r\n  contextmenuFilter -> END_NODE [ label=\"ef1878445036\" ];\r\n  commentMethods -> c2 [ label=\"et161009983\" ];\r\n  c2 -> addContextCss [ label=\"et1997866191\" ];\r\n  c2 -> END_NODE [ label=\"ef536696511\" ];\r\n  addContextCss -> END_NODE [ label=\"et401253893\" ];\r\n}\r\n"}